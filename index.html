<html lang="en">
  
<head>
    <meta charset="UTF-8">
    <title>Catalog Visualizer</title>
    <link rel="stylesheet" href="stylesheet.css">
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
</head>
  
<body>
    <section>
        <h1>Catalog Visualizer</h1>

        <div style="float:right; padding-right: 10px;" class="dropdown">
            <label for="language">Select a Catalog Year:</label>
            <select name="catalogSelection" id="dropDownWrite" onmousedown="this.value='';" onchange="catalogClicked(this.value);"></select>
        </div>
        <div id="boxSection">

        </div>
    

        <script>
            // Dropdown Menu Scripts
            $(document).ready(function () {
                // Write the dropdown box options, display classes of first possible catalog
                $.getJSON("scraper/all_catalogs.json", 
                    function (data) {
                        for(var catalogs in data) {
                            $("#dropDownWrite").append('<option value="' + catalogs + '">' + catalogs + '</option>'); 
                        }

                        catalogClicked($("#dropDownWrite").val());
                    } 
                )
            });

            // Dropdown menu kind of works- next step is only writing the applicable catalog to the page
            function catalogClicked(catalog){
                // Write Boxes to Page Script

                // Clear out whatever is in there currently
                boxSection.innerHTML = "";

                // Grab the json and write all the classes
                $.getJSON("scraper/all_catalogs.json", 
                function (data) {
                    console.log(data[catalog]['terms'])
                    for ( var semesters in data[catalog]['terms']){
                        for( var classes in data[catalog]['terms'][semesters]){
                            boxSection.innerHTML += '<div class="box">' + data[catalog]['terms'][semesters][classes] + '</div>' ;   
                        }
                        boxSection.innerHTML += '<br>' ;
                    }
                });
            }

        </script>

    </section>
</body>
  
</html>